<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope itemtype="http://schema.org/Product">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta name="keywords" content="@{package.tags}" />

		<title>Scripts and Automation</title>
		<meta name="description" content="FileBot scripting allows to easily write scripts for any kind of automation in Groovy. There is no limits. Extract archives, download subtitles, rename episodes, fetch artwork and banners and delete left-behind clutter. All in one go." />

		<meta itemprop="name" content="FileBot Scripting and Automation" />
		<meta itemprop="description" content="FileBot scripting allows to easily write scripts for any kind of automation in Groovy. There is no limits. Extract archives, download subtitles, rename episodes, fetch artwork and banners and delete left-behind clutter. All in one go." />
		<meta itemprop="image" content="@{link.image.logo}" />

		<link rel="icon" href="favicon.png" sizes="16x16 32x32" type="image/png">
		<link rel="stylesheet" href="base.css" type="text/css">
		<link rel="stylesheet" href="code.css" type="text/css">
		<link rel="stylesheet" href="base.dark.css" type="text/css" media="(prefers-color-scheme: dark)">
		<link rel="stylesheet" href="code.dark.css" type="text/css" media="(prefers-color-scheme: dark)">
	</head>
	<body>
		<div class="page">
			<div class="navigation">
				<div>
				<ul>
					<li><a href="forums/">Forums</a></li>
					<li><a href="manual.html">FAQ</a></li>
					<li><a href="download.html">Download</a></li>
				</ul>
				</div>
			</div>

			<div class="header">
				<a href="/"><img class="logo" alt="logo" src="images/filebot.logo.svg" width="64" height="64" /></a>
				<h1>
					Scripts and Automation
					<span class="description">Scripting interface usage manual</span>
				</h1>
			</div>

			<div class="content">
				<div class="main-section-screenshot">
					<a href="https://github.com/filebot/scripts"><img alt="See Examples" width="330" src="screenshots/script.png" /></a>
				</div>
				<div class="section about">
					<h2>About</h2>
					<div class="main-section-paragraph">
						<p>
							FileBot makes scripting and automation as easy as it gets. Just script everything in <a href="http://groovy-lang.org/">Groovy</a> 
							instead of bothering with cumbersome cmd and bash scripts. It's the same on all platforms and much more powerful.
						</p>
						<p>
							The provided <a href="#functions">functions</a> are the same as in the <a href="cli.html">CLI</a> and <a href="cli.html#arguments">parameter usage</a> 
							is also exactly the same.
						</p>
					</div>
					<h2 id="overview">Examples</h2>
					<h3 id="usage">Running Scripts</h3>
					<p>
					<code><span class="cmd">filebot</span> <span class="option">-script</span> <span class="argument">"path/to/script.groovy"</span> <span class="argument">args...</span></code>
					Execute a given Groovy script. Parameters defined on the cmdline when starting a script will serve as default parameters
					while running that script.
					</p>

					<h3 id="repository">Script Repository</h3>
					<p class="description">
					Find scripts for common tasks <a href="forums/viewtopic.php?t=5">here</a>. You can just use these scripts straight 
					away or as a reference for building your own more advanced scripts. If you wrote a really useful script 
					please <a href="forums/viewforum.php?f=4">share it with us</a>.
					</p>
					<ul class="repository">
						<li><a href="amc.html">Automated Media Center</a></li>
						<li><a href="forums/viewtopic.php?p=204#p204">Fetch artwork and nfo files for TV Shows</a></li>
						<li><a href="forums/viewtopic.php?p=205#p205">Fetch artwork and nfo files for Movies</a></li>
						<li><a href="forums/viewtopic.php?p=8871#p8871">Fetch subtitles for all files</a></li>
						<li><a href="forums/viewtopic.php?p=1341#p1341">Delete left behind clutter files</a></li>
						<li><a href="forums/viewtopic.php?p=2459#p2459">Query Rename History</a></li>
						<li><a href="forums/viewtopic.php?p=5394#p5394">View or Clear Extended Attributes</a></li>
						<li><a href="forums/viewtopic.php?p=53#p53">Export Media Index to CSV file</a></li>
						<li><a href="forums/viewtopic.php?p=12396#p12396">Calculate CRC32 and Verify File Integrity</a></li>
						<li><a href="forums/viewtopic.php?p=19132#p19132">Find Missing Episodes</a></li>
						<li><a href="forums/viewtopic.php?p=23171#p23171">Find Duplicate Movie or Episode files</a></li>
						<li><a href="forums/viewtopic.php?p=44992#p44992">Write Embedded Tags</a></li>
					</ul>


<h3 id="examples">Example Scripts</h3>
<div class="description">
<pre><code>args.<span class="method">eachMediaFolder</span> {
	<span class="method">getMissingSubtitles</span>(<span class="property">folder</span>:it)
	<span class="method">rename</span>(<span class="property">folder</span>:it)
	<span class="method">compute</span>(<span class="property">file</span>:it.<span class="method">listFiles</span>{ it.<span class="method">isVideo</span>() })
}</code></pre>Fetch subtitles, rename and compute checksums for all media folders in the file hierarchy.</div>

<div class="description">
<pre><code>[<span class="string">'E:/TV Shows'</span> as File].<span class="method">eachMediaFolder</span>{ <span class="method">rename</span>(<span class="property">folder</span>:it, <span class="property">db</span>:<span class="string">'TheTVDB'</span>) }
[<span class="string">'E:/Anime'</span> as File].<span class="method">eachMediaFolder</span>{ <span class="method">rename</span>(<span class="property">folder</span>:it, <span class="property">db</span>:<span class="string">'AniDB'</span>) }
[<span class="string">'E:/Movies'</span> as File].<span class="method">eachMediaFolder</span>{ <span class="method">rename</span>(<span class="property">folder</span>:it, <span class="property">db</span>:<span class="string">'TheMovieDB'</span>) }
</code></pre>Run rename on different folder hierarchies using different episode/movie datasources.</div>

<div class="description">
<pre><code>args.<span class="method">getFiles</span>{ it.<span class="method">isVideo</span>() }
.<span class="method">sort</span>{ a, b -> a.name.<span class="method">compareTo</span>(b.name) }
.<span class="method">each</span>{ println <span class="method">getMediaInfo</span>(<span class="property">file</span>:it, <span class="property">format</span>:<span class="string">'{fn} [{vf} {vc} {af}]'</span>) }
</code></pre>Print media info for all video files using the given format pattern.</div>


					<h2 class="reference" id="functions">Function Reference</h2>
					<div class="documentation">
					<h4>Rename media files</h4>
					<pre><span class="return">File[]</span> <span class="method">rename</span>(<span class="property">folder</span>|<span class="property">file</span>, <span class="property">query</span>, <span class="property">output</span>, <span class="property">format</span>, <span class="property">db</span>, <span class="property">lang</span>, <span class="property">strict</span>)</pre>
					<div class="text">Match files with episode/movie data and rename according to given naming scheme.</div>
					<dl>
						<dt>Parameters:</dt>
						<dd><span class="property">folder</span> - process media files in this folder</dd>
						<dd><span class="property">file</span> - process these media files</dd>
						<dd><span class="property">action</span> - rename action name or closure</dd>
						<dd><span class="property">conflict</span> - define conflict handling</dd>
						<dd><span class="property">output</span> - output folder, if format expression is not absolute</dd>
						<dd><span class="property">format</span> - episode/movie naming scheme</dd>
						<dd><span class="property">db</span> - episode/movie database</dd>
						<dd><span class="property">query</span> - force series/movie name, auto-detect if not set</dd>
						<dd><span class="property">sortOrder</span> - episode sort order</dd>
						<dd><span class="property">filter</span> - episode filter expression</dd>
						<dd><span class="property">lang</span> - preferred language for episode/movie titles</dd>
						<dd><span class="property">strict</span> - turn on/off strict matching</dd>
					</dl>
					</div>

					<div class="documentation">
					<h4>Fetch subtitles for media files</h4>
					<pre><span class="return">File[]</span> <span class="method">getSubtitles</span>(<span class="property">folder</span>|<span class="property">file</span>, <span class="property">query</span>, <span class="property">lang</span>, <span class="property">output</span>, <span class="property">encoding</span>, <span class="property">strict</span>)</pre>
					<div class="text">
						Download subtitles for the given files. Lookup subtitles via hash or match by filename. If you only want to download 
						missing subtitles you should use <pre style="font-size:inherit;display:inline"><span class="method">getMissingSubtitles</span></pre>
						so subtitles that have already been downloaded will not be downloaded again overridding existing subtitle files.
					</div>
					<dl>
						<dt>Parameters:</dt>
						<dd><span class="property">folder</span> - process media files in this folder</dd>
						<dd><span class="property">file</span> - process these media files</dd>
						<dd><span class="property">db</span> - database filter expression (e.g. opensubtitles|subscene)</dd>
						<dd><span class="property">query</span> - lookup subtitles by series/movie name</dd>
						<dd><span class="property">lang</span> - subtitle language</dd>
						<dd><span class="property">output</span> - force output format (e.g. srt)</dd>
						<dd><span class="property">encoding</span> - force output charset</dd>
						<dd><span class="property">strict</span> - enable matching subtitles via filename</dd>
					</dl>
					</div>

					<div class="documentation">
					<h4>File verification</h4>
					<pre><span class="return">boolean</span> <span class="method">check</span>(<span class="property">folder</span>|<span class="property">file</span>)</pre>
					<div class="text">Check given sfv/md5/sha1 files.</div>
					<dl>
						<dt>Parameters:</dt>
						<dd><span class="property">folder</span> - check the sfv/md5/sha1 files in this folder</dd>
						<dd><span class="property">file</span> - check these sfv/md5/sha1</dd>
					</dl>
					<hr/>
					<pre><span class="return">File</span> <span class="method">compute</span>(<span class="property">folder</span>|<span class="property">file</span>, <span class="property">output</span>, <span class="property">encoding</span>)</pre>
					<div class="text">Compute sfv/md5/sha1 for the given files.</div>
					<dl>
						<dt>Parameters:</dt>
						<dd><span class="property">folder</span> - compute checksums for files in this folder</dd>
						<dd><span class="property">file</span> - compute checksums for these files</dd>
						<dd><span class="property">output</span> - absolute or relative output file or just output format (sfv, md5 or sha1)</dd>
						<dd><span class="property">encoding</span> - output charset, defaults to UTF-8</dd>
					</dl>
					</div>

					<div class="documentation">
					<h4>Other</h4>
					<pre><span class="return">File[]</span> <span class="method">extract</span>(<span class="property">folder</span>|<span class="property">file</span>, <span class="property">output</span>)</pre>
					<div class="text">Extract files from single-volume or multi-volume archives (.zip, .rar, .7z, etc).</div>
					<dl>
						<dt>Parameters:</dt>
						<dd><span class="property">folder</span> - extract all archives that are in this folder</dd>
						<dd><span class="property">file</span> - extract this archive</dd>
						<dd><span class="property">output</span> - output folder, defaults to archive path</dd>
						<dd><span class="property">conflict</span> - define conflict handling</dd>
					</dl>
					<hr/>
					<pre><span class="return">String[]</span> <span class="method">fetchEpisodeList</span>(<span class="property">query</span>, <span class="property">format</span>, <span class="property">db</span>, <span class="property">lang</span>)</pre>
					<div class="text">Fetch episode data for the given tv show and format episode names.</div>
					<dl>
						<dt>Parameters:</dt>
						<dd><span class="property">query</span> - tv series name</dd>
						<dd><span class="property">format</span> - episode naming scheme</dd>
						<dd><span class="property">db</span> - episode database</dd>
						<dd><span class="property">sortOrder</span> - episode sort order</dd>
						<dd><span class="property">lang</span> - preferred language for episode titles</dd>
					</dl>
					<hr/>
					<pre><span class="return">String</span> <span class="method">getMediaInfo</span>(<span class="property">file</span>, <span class="property">format</span>)</pre>
					<div class="text">Get mediainfo as defined by the given format.</div>
					<dl>
						<dt>Parameters:</dt>
						<dd><span class="property">file</span> - get info for this file</dd>
						<dd><span class="property">format</span> - media naming scheme</dd>
					</dl>
					</div>

					<div class="documentation">
					<h4>Extras</h4>
					<div>
						<a href="docs/api/net/filebot/cli/ScriptShellMethods.html">ScriptShellMethods</a> also defines lots of extra useful functions and there is example code in the <a href="forums/viewtopic.php?t=5">Script Repository</a>.
					</div>
					</div>
				</div>

				<div class="metrics"></div>

				<p class="suggestion">
					Need help getting started? Join the <a href="forums/viewforum.php?f=4">Forum</a> or <a href="channel.html">Discord</a>.
				</p>

				<div class="footer">
					<p><a href="/">FileBot Media Renamer</a> | Copyright @{tstamp.year} @{package.company}</p>
				</div>
			</div>
		</div>
	</body>
</html>
